<% @email ||= Email.new %>

<%= form_with(model: [:super, @email], class: "form-horizontal", id: "email-form") do |f| %>
  <div class="form-group">
    <%= f.label :subject, class: "col-md-4 control-label" %>
    <div class="col-md-8">
      <%= f.text_field :subject, { class: "form-control" } %>
    </div>
  </div>
  <div class="form-group">
    <%= f.label :body, class: "col-md-4 control-label" %>
    <div class="col-md-8">
      <%= f.text_area :body, { class: "form-control" } %>
      <div class="help-block">
        You can use
        <a href="https://guides.github.com/features/mastering-markdown/#examples" target="_blank">
          markdown syntax
        </a>
        to bedazzle the email
      </div>
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-4 control-label"><b>Preview</b></div>
    <div class="col-md-8 form-control-static">
      <p>Hey <%= current_user.first_name %>!</p>
      <div id="email_body_preview"></div>
    </div>
  </div>
  <%= f.submit "Submit", class: "btn btn-primary" %>
<% end %>
